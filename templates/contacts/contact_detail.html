{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-5">

    <div class="card shadow-lg border-0 p-5"
         style="border-radius: 25px; max-width: 800px; margin:auto;">

        <!-- Profile Photo -->
        <div class="text-center">
            {% if doctor.profile_photo %}
                <img src="{{ doctor.profile_photo.url }}"
                     class="rounded-circle shadow"
                     style="width:150px; height:150px; object-fit:cover;">
            {% else %}
                <img src="{% static 'defaults/default_doctor.jpg' %}"
                     class="rounded-circle shadow"
                     style="width:150px; height:150px; object-fit:cover;">
            {% endif %}
        </div>

        <!-- Name + Specialty -->
        <h2 class="text-center mt-3 fw-bold">{{ doctor.name }}</h2>
        <p class="text-center text-muted" style="font-size:18px;">
            {{ doctor.speciality }}
        </p>

        <hr class="my-4">

        <!-- ALL Doctor Info -->
        <div class="px-3">

            <p><strong>City:</strong> {{ doctor.city }}</p>
            <p><strong>Hospital:</strong> {{ doctor.hospital }}</p>

            {% if doctor.fees %}
            <p><strong>Fees:</strong> ${{ doctor.fees }}</p>
            {% endif %}

            {% if doctor.rating %}
            <p><strong>Rating:</strong> {{ doctor.rating }}</p>
            {% endif %}

            {% if doctor.phone %}
            <p><strong>Phone:</strong> {{ doctor.phone }}</p>
            {% endif %}

            {% if doctor.description %}
            <p><strong>Biography:</strong> {{ doctor.description }}</p>
            {% endif %}
            <div class="d-flex justify-content-center align-items-center gap-2 mt-3">
                <a href="{% url 'toggle_favorite_doctor' doctor.id %}"
                class="btn btn-danger">
                    {% if is_fav %}
                        Remove from Favorites
                    {% else %}
                        Add to Favorites
                    {% endif %}
                </a>

                <a href="{% url 'request_appointment' doctor.id %}"
                class="btn"
                style="background-color:#3ec6aa; color:white;">
                    Request Appointment
                </a>
            </div>

 
        </div>
        

        <hr class="my-4">

        <!-- Edit / Delete (Only Admin) -->
        {% if user.is_superuser %}
        <div class="d-flex justify-content-center gap-3 mb-4">
            <a href="{% url 'contact_update' doctor.id %}" 
               class="btn btn-warning px-4">Edit</a>

            <a href="{% url 'contact_delete' doctor.id %}" 
               class="btn btn-danger px-4">Delete</a>
        </div>
        {% endif %}

    {% if request.GET.from == "recommend" %}
        <a href="{% url 'recommend' %}" class="btn btn-secondary mt-4">
            <i class="bi bi-arrow-left"></i> Back to Search
        </a>
    {% else %}
        <a href="{% url 'contact_list' %}" class="btn btn-secondary mt-4">
            <i class="bi bi-arrow-left"></i> Back to Doctors
        </a>
    {% endif %}
    </div>

</div>
{% endblock %}
